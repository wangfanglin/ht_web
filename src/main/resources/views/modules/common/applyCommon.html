<link rel="stylesheet" href="${ctxStatic}/common/css/index.css">
<script src="${ctxStatic}/common/js/imagePreview.js"></script>
<script src="${ctxStatic}/common/common.js?${_version}" ></script><div id="applyDiv">
<%
#ajax applyCommon: {
%>

    <div style="background: white">


            <div class="form-unit" >${text('在线申请信息')}
                <%if("1"==type! || "2"==type!){%>
                <span style="margin-left:651px;">维修类型：
                        <%if("1"==type!){%>换新<%}%>
                        <%if("2"==type!){%>维修<%}%>
                </span>
                <%}%>
            </div>
            <div class="row">
                <div class="col-xs-3">
                    <div class="form-group">
                        <label class="control-label col-sm-4" title="">
                            <span class="required "></span> ${text('客户姓名')}：<i class="fa icon-question hide"></i></label>
                        <div class="col-sm-8" >
                            ${userApply.cardName!}
                        </div>
                    </div>
                </div>
                <div class="col-xs-3">
                    <div class="form-group">
                        <label class="control-label col-sm-4" title="">
                            <span class="required "></span> ${text('联系电话')}：<i class="fa icon-question hide"></i></label>
                        <div class="col-sm-8" >
                            ${phone!}
                        </div>
                    </div>
                </div>
                <div class="col-xs-3">
                    <div class="form-group">
                        <label class="control-label col-sm-4" title="">
                            <span class="required "></span> ${text('IMEI')}:</label>
                        <div class="col-sm-8">
                            ${policyInfo.strImeiNum!}
                        </div>
                    </div>
                </div>
                <div class="col-xs-3">
                    <div class="form-group">
                        <label class="control-label col-sm-4" title="">
                            <span class="required hide"></span> ${text('损坏原因')}：<i class="fa icon-question hide"></i></label>
                        <div class="col-sm-8">
                            ${@DictUtils.getDictLabel('damage_reason',userApply.malfunctionId!,'未知')}
                        </div>
                    </div>
                </div>
            </div>


            <div class="row">
                <div class="col-xs-3">
                    <div class="form-group">
                        <label class="control-label col-sm-4" title="">
                            <span class="required "></span> ${text('出险时间')}:</label>
                        <div class="col-sm-8">
                            ${userApply.createDate!,"yyyy-MM-dd HH:mm:ss"}
                        </div>
                    </div>
                </div>
                <div class="col-xs-3">
                    <div class="form-group">
                        <label class="control-label col-sm-4" title="">
                            <span class="required "></span> ${text('销售渠道')}:</label>
                        <div class="col-sm-8">
                            ${policyInfo.strChannelName!}
                        </div>
                    </div>
                </div>
                <div class="col-xs-3">
                    <div class="form-group">
                        <label class="control-label col-sm-4" title="">
                            <span class="required "></span> ${text('产品名称')}:</label>
                        <div class="col-sm-8">
                            ${policyInfo.channelProductName!}
                        </div>
                    </div>
                </div>
            </div>



            <div class="row">
                <div class="col-xs-4">
                    <div class="form-group">
                        <label class="control-label col-sm-4" title="">
                            <span class="required "></span> ${text('损坏部位图片')}：<i class="fa icon-question hide"></i></label>
                        <div class="col-sm-9" >
                            <ul class="picView-magnify-list" style="padding: 0px;font-size: 18px; font-weight: bold;" id="badPartImgsQ" >
                                <%for(imgs in badPartImgs!){ %>
                                <li style="	text-decoration: none; list-style: none;float: left;">
                                    <a href="javascript:void(0)" data-magnify="gallery" data-group="g1" data-src="${imgs}" data-caption="">
                                        <img src="${imgs}" width="100px" height="100px">
                                    </a>
                                </li>
                                <% } %>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="col-xs-4">
                    <div class="form-group">
                        <label class="control-label col-sm-4" title="">
                            <span class="required "></span> ${text('身份证图片')}：<i class="fa icon-question hide"></i></label>
                        <div class="col-sm-9" >
                            <ul class="picView-magnify-list" style="padding: 0px;font-size: 18px; font-weight: bold;" id="cardImgsQ">
                                <%for(imgs in cardImgs!){ %>
                                <li style="	text-decoration: none; list-style: none;float: left;">
                                    <a href="javascript:void(0)" data-magnify="gallery" data-group="g1" data-src="${imgs}" data-caption="">
                                        <img src="${imgs}" width="100px" height="100px">
                                    </a>
                                </li>
                                <% } %>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="col-xs-4">
                    <div class="form-group">
                        <label class="control-label col-sm-4" title="">
                            <span class="required hide"></span> ${text('购买凭证图片')}：<i class="fa icon-question hide"></i></label>
                        <div class="col-sm-9">
                            <ul class="picView-magnify-list" style="padding: 0px;font-size: 18px; font-weight: bold;" id="voucherImgsQ">
                                <%for(imgs in voucherImgs!){ %>
                                <li style="	text-decoration: none; list-style: none;float: left;">
                                    <a href="javascript:void(0)" data-magnify="gallery" data-group="g1" data-src="${imgs}" data-caption="">
                                        <img src="${imgs}" width="100px" height="100px">
                                    </a>
                                </li>
                                <% } %>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-xs-4">
                    <div class="form-group">
                        <label class="control-label col-sm-4" title="">
                            <span class="required hide"></span> ${text('联系地址')}：<i class="fa icon-question hide"></i></label>
                        <div class="col-sm-8">
                            ${addressInfo!}
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-xs-4">
                    <div class="form-group">
                        <label class="control-label col-sm-4" title="">
                            <span class="required hide"></span> ${text('申请时间')}：<i class="fa icon-question hide"></i></label>
                        <div class="col-sm-8">
                            ${userApply.createDate!,"yyyy-MM-dd HH:mm:ss"}
                        </div>
                    </div>
                </div>
            </div>








    </div>


<% }%>
</div>




<script type="text/javascript">

    $(function () {

        $.ajax({
            type:"get",
            //公共页面保证参数不重复  将formId 明明为 commonApplyId
            url:"${ctx}/common/applyCommon?commonApplyId=${commonApplyId}",
            beforSend:function (XMLHttpRequest) {
                XMLHttpRequest.setRequestHeader("Content-Type","text/html;charset=UTF-8")
            },
           success: function(data) {
              // console.log(data)
            $("#applyDiv").html(data);
               ImagePreview.init({id:"badPartImgsQ"});
               ImagePreview.init({id:"cardImgsQ"});
               ImagePreview.init({id:"voucherImgsQ"});


        }
    });
    });
    /**
     * Created by hucf on 2019/11/20.
     */
    // var ImagePreview = {
    //     default_params:{},
    //     init:function (param) {
    //         if (param) {
    //             $.extend(this.default_params, param);
    //         }
    //         ip_global_img_list = [];
    //         var id = this.default_params.id;
    //         if (typeof id == 'string') {
    //             if ((ip_global_img_list = $("#"+id).find("img")).length == 0) {
    //                 return;
    //             }
    //         } else if (typeof id == 'object' && id != null) {
    //             ip_global_img_list = $(id);
    //         }
    //         this.fnGenerateHtml();
    //         this.fnBindEvent(ip_global_img_list);
    //     },
    //     fnBindEvent:function (ip_global_img_list) {
    //         if (ip_global_img_list.length == 0) {
    //             return;
    //         }
    //         $(ip_global_img_list).on("click", this.onClickEvent);
    //         this.onDragEvent($("#ip-img-preview"));
    //         $("#ip-img-preview").on('mousewheel DOMMouseScroll', this.onMouseScrollEvent);
    //
    //         $('#ip-img-floatshadow').on("click", function () {
    //             $('#ip-img-preview').hide();
    //             $("#ip-left").hide();
    //             $("#ip-right").hide();
    //             $('#ip-img-floatshadow').hide();
    //             $('#ip-img-preview').attr("src", "");
    //         });
    //         $("#ip-left").hover(this.fnMouseOver,this.fnMouseOut).click(this.fnPrev);
    //         $("#ip-right").hover(this.fnMouseOver,this.fnMouseOut).click(this.fnNext);
    //     },
    //     fnGenerateHtml:function () {
    //         $("body").append('<img id="ip-img-preview" style="position: fixed;left: 50%;top: 50%;transform: translate(-50%, -50%);z-index: 19941206;cursor: move;display: none"/><div id="ip-img-floatshadow" style="z-index: 19941205;background-color: #000;opacity: .5;top: 0;left: 0;width: 100%;height: 100%;position: fixed;display: none" title="点击空白处关闭"></div>');
    //     },
    //     fnMouseOver:function () {
    //         $(this).css("background", "rgb(134, 134, 134)");
    //         $(this).css("border", "1px solid rgb(111, 111, 111)");
    //     },
    //     fnMouseOut:function () {
    //         $(this).css("background", "");
    //         $(this).css("border", "");
    //     },
    //     fnPrev:function () {
    //         if (typeof(ip_global_cur) == "number" && ip_global_cur>0) {
    //             ImagePreview.fnReset();
    //             $("#ip-img-preview").animate({left:"48%"}, 100);
    //             $("#ip-img-preview").attr("src", ip_global_img_list[--ip_global_cur].src);
    //             $("#ip-img-preview").animate({left:"50.5%"}, 100);
    //             $("#ip-img-preview").animate({left:"50%"}, 100);
    //             ImagePreview.fnAdjustMaxWidth();
    //         }
    //     },
    //     fnNext:function () {
    //         if (typeof(ip_global_cur) == "number" && ip_global_cur<ip_global_img_list.length-1) {
    //             ImagePreview.fnReset();
    //             $("#ip-img-preview").animate({left:"52%"}, 100);
    //             $("#ip-img-preview").attr("src", ip_global_img_list[++ip_global_cur].src);
    //             $("#ip-img-preview").animate({left:"49.5%"}, 100);
    //             $("#ip-img-preview").animate({left:"50%"}, 100);
    //             ImagePreview.fnAdjustMaxWidth();
    //         }
    //     },
    //     fnGetIndexOfCurImg:function (cur) {
    //         for (var i=0; i<ip_global_img_list.length; i++) {
    //             if ($(ip_global_img_list[i]).is(cur)) {
    //                 return i;
    //             }
    //         }
    //     },
    //     onClickEvent:function (e) {
    //         ImagePreview.fnReset();
    //         $("#ip-img-preview").attr("src", $(this).attr("src"));
    //         ImagePreview.fnAdjustMaxWidth();
    //         ip_global_cur = ImagePreview.fnGetIndexOfCurImg($(this));
    //         $("#ip-img-floatshadow").fadeIn();
    //         $("#ip-img-preview").fadeIn();
    //         $("#ip-left").fadeIn();
    //         $("#ip-right").fadeIn();
    //     },
    //     fnAdjustMaxWidth:function () {
    //         //最长边判定，避免超出屏幕画幅的展示
    //         var widthFlag = true;
    //         var max = $("#ip-img-preview").width();
    //         if (max < $("#ip-img-preview").height()) {
    //             widthFlag = false;
    //             max = $("#ip-img-preview").height();
    //         }
    //         if (widthFlag && $(window).width() < max) {
    //             $("#ip-img-preview").css("width","75%");
    //         } else if (!widthFlag && $(window).height() < max) {
    //             $("#ip-img-preview").css("height","75%");
    //         }
    //     },
    //     fnReset:function () {
    //         $("#ip-img-preview").css("left","50%");
    //         $("#ip-img-preview").css("top","50%");
    //         $("#ip-img-preview").css("width","");
    //         $("#ip-img-preview").css("height","");
    //     },
    //     onMouseScrollEvent:function (e) {
    //         e.preventDefault();
    //         var wheel = e.originalEvent.wheelDelta || -e.originalEvent.detail;
    //         var delta = Math.max(-1, Math.min(1, wheel));
    //         if (delta < 0) { //向下滚动
    //             $(this).width($(this).width() / 1.1);
    //             $(this).height($(this).height() / 1.1);
    //         } else { //向上滚动
    //             $(this).width($(this).width() * 1.1);
    //             $(this).height($(this).height() * 1.1);
    //         }
    //     },
    //     onDragEvent:function (obj) {
    //         return
    //         obj.bind("mousedown", start);
    //         function start(event) {
    //             if (event.button == 0) {
    //                 gapX = event.clientX - obj.offset().left;
    //                 gapY = event.clientY - obj.offset().top;
    //                 $(document).bind("mousemove", move);
    //                 $(document).bind("mouseup", stop);
    //             }
    //             return false;
    //         }
    //         function move(event) {
    //             obj.css({
    //                 "left": (event.clientX - gapX + obj.width() / 2) + "px",
    //                 "top": (event.clientY - gapY + obj.height() / 2) + "px"
    //             });
    //             return false;
    //         }
    //         function stop() {
    //             $(document).unbind("mousemove", move);
    //             $(document).unbind("mouseup", stop);
    //         }
    //     }
    // };
</script>

