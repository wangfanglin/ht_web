<% layout('/layouts/default.html', {title: '收款人信息表管理', libs: ['validate','fileupload']}){ %>
<% include('/modules/common/policyDetail.html', {commonFromId:commonFromId}){} %>
<div class="main-content">
	<div class="box box-main">
		<div class="box-header with-border">
			<div class="box-title">
				<i class="fa icon-note"></i> ${text(htReceiptData.isNewRecord ? '审核收款人信息表' : '审核收款人信息表')}
			</div>
			<div class="box-tools pull-right">
				<button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i></button>
			</div>
		</div>
		<#form:form id="inputForm" model="${htReceiptData}" action="${ctx}/receipt/htReceiptData/save" method="post" class="form-horizontal">
			<div class="box-body">
				<div class="form-unit">${text('基本信息')}</div>
				<#form:hidden path="id"/>
				<#form:hidden path="bdId"/>
				<#form:hidden path="htFormInfo.id"/>


				<div class="row">
					<div class="col-xs-6">
					<div class="form-group">
						<label class="control-label col-sm-4" title="">
							<span class="required hide">*</span> ${text('渤海报案号')}：<i class="fa icon-question hide"></i></label>
						<div class="col-sm-8">
							${htReceiptData.bhReportNo!}
						</div>
					</div>
				</div>
			</div>
				<div class="row">
					<div class="col-xs-6">
						<div class="form-group">
							<label class="control-label col-sm-4" title="">
								<span class="required hide">*</span> ${text('保险单号')}：<i class="fa icon-question hide"></i></label>
							<div class="col-sm-8">
								${htReceiptData.insuranceNumber!}
							</div>
						</div>
					</div>
				</div>
				<div class="row">
					<div class="col-xs-6">
						<div class="form-group">
							<label class="control-label col-sm-4" title="">
								<span class="required hide">*</span> ${text('省')}：<i class="fa icon-question hide"></i></label>
							<div class="col-sm-8">
								${htReceiptData.provinceCode!}
							</div>
						</div>
					</div>
				</div>
				<div class="row">
					<div class="col-xs-6">
						<div class="form-group">
							<label class="control-label col-sm-4" title="">
								<span class="required hide">*</span> ${text('市')}：<i class="fa icon-question hide"></i></label>
							<div class="col-sm-8">
								${htReceiptData.cityCode!}
							</div>
						</div>
					</div>
				</div>
				<div class="row">
					<div class="col-xs-6">
						<div class="form-group">
							<label class="control-label col-sm-4" title="">
								<span class="required hide">*</span> ${text('区')}：<i class="fa icon-question hide"></i></label>
							<div class="col-sm-8">
								${htReceiptData.districtCode!}
							</div>
						</div>
					</div>
				</div>

				<div class="row">
					<div class="col-xs-6">
						<div class="form-group">
							<label class="control-label col-sm-4" title="">
								<span class="required hide">*</span> ${text('收款人姓名')}：<i class="fa icon-question hide"></i></label>
							<div class="col-sm-8">
								${htReceiptData.payeeName!}
							</div>
						</div>
					</div>
				</div>
				<div class="row">
					<div class="col-xs-6">
						<div class="form-group">
							<label class="control-label col-sm-4" title="">
								<span class="required hide">*</span> ${text('收款人身份证号')}：<i class="fa icon-question hide"></i></label>
							<div class="col-sm-8">
								${htReceiptData.payeeIdNumber!}
							</div>
						</div>
					</div>
				</div>
				<div class="row">
					<div class="col-xs-6">
						<div class="form-group">
							<label class="control-label col-sm-4" title="">
								<span class="required hide">*</span> ${text('银行名称')}：<i class="fa icon-question hide"></i></label>
							<div class="col-sm-8">
								${htReceiptData.bankName!}
							</div>
						</div>
					</div>
				</div>
				<div class="row">
					<div class="col-xs-6">
						<div class="form-group">
							<label class="control-label col-sm-4" title="">
								<span class="required hide">*</span> ${text('银行类别')}：<i class="fa icon-question hide"></i></label>
							<div class="col-sm-8">
								${@DictUtils.getDictLabel('bank_type',htReceiptData.bankType!,'未知')}
							</div>
						</div>
					</div>
				</div>
				<div class="row">
					<div class="col-xs-6">
						<div class="form-group">
							<label class="control-label col-sm-4" title="">
								<span class="required hide">*</span> ${text('银行账号')}：<i class="fa icon-question hide"></i></label>
							<div class="col-sm-8">
								${htReceiptData.bankNumber!}
							</div>
						</div>
					</div>
				</div>

				<div class="row">
					<div class="col-xs-6">
						<div class="form-group">
							<label class="control-label col-sm-4" title="">
								<span class="required hide">*</span> ${text('审核状态')}：<i class="fa icon-question hide"></i></label>
							<div class="col-sm-8">
								${@DictUtils.getDictLabel('check_status',htReceiptData.auditStatus!,'未知')}
							</div>
						</div>
					</div>
				</div>
				<div class="row">
					<div class="col-xs-6">
						<div class="form-group">
							<label class="control-label col-sm-4" title="">
								<span class="required hide">*</span> ${text('回传状态')}：<i class="fa icon-question hide"></i></label>
							<div class="col-sm-8">
								${@DictUtils.getDictLabel('pass_back',htReceiptData.passBack!,'未知')}
							</div>
						</div>
					</div>
				</div>
				<div class="row">
					<div class="col-xs-6">
						<div class="form-group">
							<label class="control-label col-sm-4" title="">
								<span class="required hide">*</span> ${text('上传银行卡照片')}：<i class="fa icon-question hide"></i></label>
							<div class="col-sm-8">
								<%if(null != htReceiptData.bandImg!){ %>
								<ul class="picView-magnify-list" style="padding: 30px">
									<li>
										<a href="javascript:void(0)" data-magnify="gallery" data-group="g1" data-src="${htReceiptData.bandImg}" data-caption="测试图片一">
											<img src="${htReceiptData.bandImg}"  width="100px" height="100px">
										</a>
									</li>
								</ul>
								<%}%>
								<%if(null == htReceiptData.bandImg!){ %>无银行卡图片信息
								<%}%>
							</div>
						</div>
					</div>
				</div>

				<div class="row">
					<div class="col-xs-6">
						<div class="form-group">
							<label class="control-label col-sm-4" title="">
								<span class="required hide">*</span> ${text('上传留存照片')}：<i class="fa icon-question hide"></i></label>
							<div class="col-sm-8">
								<#form:fileupload id="uploadImage2" returnPath="true" bizKey="${htReceiptData.id}" bizType="HtReceiptData_image "
								filePathInputId="keepImg"
								uploadType="image" readonly="false" maxUploadNum="3" isMini="false" style="height: 30px"/>
								<#form:hidden name="keepImg" class="form-control"/>
							</div>
						</div>
					</div>
				</div>


				<div class="row">
					<div class="col-xs-6">
						<div class="form-group">
							<label class="control-label col-sm-4" title="">
								<span class="required hide">*</span> ${text('备注')}：<i class="fa icon-question hide"></i></label>
							<div class="col-sm-8">
								<#form:textarea  path="remark" maxlength="255" class="form-control"/>
							</div>
						</div>
					</div>
				</div>
				<% if ('1' == htReceiptData.status!){ %>
				<div class="row">
					<div class="col-xs-6">
						<div class="form-group">
							<label class="control-label col-sm-4" title="">
								<span class="required">*</span> ${text('审核')}：<i class="fa icon-question hide"></i></label>
							<div class="col-sm-8">
								<#form:radio path="auditStatus" dictType="auditStatus" class="form-control required" />
							</div>
						</div>
					</div>
				</div>
				<%}%>



			</div>
			<div class="box-footer">
				<div class="row">
					<div class="col-sm-offset-2 col-sm-10">

						<% if (hasPermi('receipt:htReceiptData:edit')){ %>
						<% if ('1' == htReceiptData.status!){ %>
						<#bpm:button bpmEntity="${htReceiptData}" formKey="hd_form_claim" completeText="${text('提 交')}"/>
						<% } %>
						<% } %>
						<script>
                            // 流程按钮提交事件
                            BpmButton = window.BpmButton || {};
                            BpmButton.complete = function($this, task){
                                $('#formInfoStatus').val(Global.STATUS_AUDIT);
                            };
						</script>
						<button type="button" class="btn btn-sm btn-default" id="btnCancel" onclick="js.closeCurrentTabPage()"><i class="fa fa-reply-all"></i> ${text('关 闭')}</button>
					</div>
				</div>
			</div>
		</#form:form>
	</div>
</div>
<% } %>
<script>
$("#inputForm").validate({
	submitHandler: function(form){
		js.ajaxSubmitForm($(form), function(data){
			js.showMessage(data.message);
			if(data.result == Global.TRUE){
				js.closeCurrentTabPage(function(contentWindow){
					contentWindow.page();
				});
			}
		}, "json");
    }
});
</script>